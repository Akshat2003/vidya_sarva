import google.generativeai as genai


def wc(a,b):
    if len(b)>len(a):b,a=a,b
    for i in range(len(a)):
        if b[:len(a)-i] in a:
            # print(len(b[:len(a)-i]))
            return((len(b[:len(a)-i])/len(a))*100)
            # if (len(b[:len(a)-i])/len(a))*100 >= 80:
            #     return True
            #     # return(b[:len(a)-i])
    return False

def dictcom(dict1,comparable_word):
    for i in dict1:
          if wc(i,comparable_word) >= 80:
               return [i,comparable_word]
    return False



text = """sañjayaḥ uvāca—Sañjaya said; tam—unto Arjuna; tathā—thus; kṛpayā— by compassion; āviṣṭam—overwhelmed; aśru-pūrṇa—full of tears; ākula— depressed; īkṣaṇam—eyes; viṣīdantam—lamenting; idam—this; vākyam —words; uvāca—said; madhusūdanaḥ—the killer of Madhu; śrī bhagavān uvāca—the Supreme Personality of Godhead said; kutaḥ— wherefrom; tvā—unto you; kaśmalam—dirtiness; idam—this lamentation; viṣame—this hour of crisis; samupasthitam—arrived; anārya—persons who do not know the value of life; juṣṭam—practiced by; asvargyam—that which does not lead to higher planets; akīrti—infamy; karam—the cause of; arjuna —O Arjuna; klaibyam—impotence; mā—do not; sma—take it; gamaḥ—go in; pārtha —O son of Pṛthā; na—never; etat—like this; tvayi—unto you; upapadyate —is befitting; kṣudram—very little; hṛdaya—heart; daurbalyam— weakness; tyaktvā—giving up; uttiṣṭha—get up; parantapa—O chastiser of the enemies; arjunaḥ uvāca—Arjuna said; katham—how; bhīṣmam—unto Bhīṣma; aham—I; saṅkhye—in the fight; droṇam—unto Droṇa; ca—also, madhusūdana—O killer of Madhu; iṣubhiḥ—with arrows; pratiyotsyāmi —shall counterattack; pūjā-arhau—those who are worshipable; arisūdana —O killer of the enemies; gurūn—the superiors; ahatvā—by killing; hi—certainly; mahāanubhāvān— great souls; śreyaḥ—it is better; bhoktum—to enjoy life; bhaikṣyam—begging; api—even; iha—in this life; loke—in this world; hatvā —killing; artha—gain; kāmān—so desiring; tu—but; gurūn—superiors; iha —in this world; eva— certainly; bhuñjīya—has to enjoy; bhogān—enjoyable things; rudhira—blood; pradigdhān—tainted with; na—nor; ca—also; etat—this; vidmaḥ—do know; katarat—which; naḥ —us; garīyaḥ—better; yat—what; vā—either; jayema—conquer us; yadi—if; vā—or; naḥ—us; jayeyuḥ—conquer; yān—those; eva—certainly; hatvā—by killing; na—never; jijīviṣāmaḥ—want to live; te—all of them; avasthitāḥ —are situated; pramukhe—in the front; dhārtarāṣṭrāḥ—the sons of Dhṛtarāṣṭra; kārpaṇya—miserly; doṣa—weakness; upahata—being inflicted by; svabhāvaḥ—characteristics; pṛcchāmi—I am asking; tvām—unto You; dharma— religion; saṁmūḍha—bewildered; cetāḥ—in heart; yat—what; śreyaḥ—all- good; syāt—may be; niścitam—confidently; brūhi—tell; tat —that; me—unto me; śiṣyaḥ—disciple; te—Your; aham—I am; śādhi—just instruct; mām—me; tvām—unto You; prapannam—surrendered; na—do not; hi—certainly; prapaśyāmi—I see; mama—my; apanudyāt— they can drive away; yat—that; śokam—lamentation; ucchoṣaṇam—drying up; indriyāṇām—of the senses; avāpya—achieving; bhūmau—on the earth; asapatnam—without rival; ṛddham—prosperous; rājyam—kingdom; surāṇām—of the demigods; api—even; ca—also; ādhipatyam—supremacy; sañjayaḥ uvāca—Sañjaya said; evam—thus; uktvā—speaking; hṛṣīkeśam — unto Kṛṣṇa, the master of the senses; guḍākeśaḥ—Arjuna, the master at curbing ignorance; parantapaḥ—the chastiser of the enemies; na yotsye—I shall not fight; iti—thus; govindam—unto Kṛṣṇa, the giver of pleasure; uktvā —saying; tūṣṇīm—silent; babhūva—became; ha—certainly; tam—unto him; uvāca—said; hṛṣīkeśaḥ—the master of the senses, Kṛṣṇa; prahasan—smiling; iva—like that; bhārata—O Dhṛtarāṣṭra, descendant of Bharata; senayoḥ—of the armies; ubhayoḥ—of both parties; madhye— between; viṣīdantam—unto the lamenting one; idam—the following; vacaḥ —words; śrī bhagavān uvāca—the Supreme Personality of Godhead said; aśocyān — that which is not worthy of lamentation; anvaśocaḥ—you are lamenting; tvam—you; prajñā-vādāḥ—learned talks; ca—also; bhāṣase—speaking; gata— lost; asūn—life; agata—not past; asūn—life; ca—also; na—never; anuśocanti— lament; paṇḍitāḥ—the learned; na—never; tu—but; eva—certainly; aham—I; jātu—become; na—never; āsam—existed; na—it is not so; tvam—yourself; na—not; ime—all these; janādhipāḥ—kings; na—never; ca—also; eva—certainly; na—not like that; bhaviṣyāmaḥ—shall exist; sarve—all of us; vayam—we; ataḥ param— hereafter; dehinaḥ—of the embodied; asmin—in this; yathā—as; dehe—in the body; kaumāram—boyhood; yauvanam—youth; jarā—old age; tathā—similarly; dehāntara—transference of the body; prāptiḥ—achievement; dhīraḥ—the sober; tatra—thereupon; na—never; muhyati—deluded; mātrā—sensuous; sparśāḥ—perception; tu—only; kaunteya—O son of Kuntī; śīta—winter; uṣṇa—summer; sukha—happiness; duḥkha-dāḥ—giving pain; āgama—appearing; apāyinaḥ—disappearing; anityāḥ—nonpermanent; tān—all of them; titikṣasva—just try to tolerate; bhārata—O descendant of the Bhārata dynasty; yam—one who; hi—certainly; na—never; vyathayanti—are distressing; ete— all these; puruṣam—to a person; puruṣarṣabha—is best among men; sama— unaltered; duḥkha—distress; sukham—happiness; dhīram—patient; saḥ—he; amṛtatvāya—for liberation; kalpate—is considered eligible; na—never; asataḥ—of the nonexistent; vidyate—there is; bhāvaḥ —endurance; na—never; abhāvaḥ—changing quality; vidyate—there is; sataḥ—of the eternal; ubhayoḥ—of the two; api—verily; dṛṣṭaḥ—observed; antaḥ— conclusion; tu—but; anayoḥ—of them; tattva—truth; darśibhiḥ—by the seers; avināśi—imperishable; tu—but; tat—that; viddhi—know it; yena—by whom; sarvam—all of the body; idam—this; tatam—widespread; vināśam —destruction; avyayasya—of the imperishable; asya—of it; na kaścit—no one; kartum—to do; arhati—able; antavantaḥ—perishable; ime—all these; dehāḥ—material bodies; nityasya— eternal in existence; uktāḥ—it is so said; śarīriṇaḥ—the embodied souls; anāśinaḥ—never to be destroyed; aprameyasya —immeasurable; tasmāt— therefore; yudhyasva—fight; bhārata—O descendant of Bharata; yaḥ—anyone; enam—this; vetti—knows; hantāram—the killer; yaḥ— anyone; ca—also; enam—this; manyate—thinks; hatam—killed; ubhau —both of them; tau—they; na—never; vijānītaḥ—in knowledge; na—never; ayam—this; hanti—kills; na—nor; hanyate—be killed; na—never; jāyate—takes birth; mriyate—never dies; vā—either; kadācit — at any time (past, present or future); na—never; ayam—this; bhūtvā —came into being; bhavitā—will come to be; vā—or; na—not; bhūyaḥ—or has come to be; ajaḥ—unborn; nityaḥ—eternal; śāśvataḥ—permanent; ayam —this; purāṇaḥ—the oldest; na—never; hanyate—is killed; hanyamāne —being killed; śarīre—by the body; veda—in knowledge; avināśinam—indestructible; nityam—always; yaḥ— one who; enam—this (soul); ajam—unborn; avyayam—immutable; katham — how; saḥ—he; puruṣaḥ—person; pārtha—O Pārtha (Arjuna); kam —whom; ghātayati—hurts; hanti—kills; kam—whom; vāsāṁsi—garments; jīrṇāni—old and worn out; yathā—as it is; vihāya— giving up; navāni—new garments; gṛhṇāti—does accept; naraḥ—a man; aparāṇi—other; tathā—in the same way; śarīrāṇi—bodies; vihāya—giving up; jīrṇāni—old and useless; anyāni—different; saṁyāti—verily accepts; navāni—new sets; dehī—the embodied; na—never; enam—unto this soul; chindanti—can cut into pieces; śastrāṇi —all weapons; na—never; enam—unto this soul; dahati—burns; pāvakaḥ— fire; na—never; ca—also; enam—unto this soul; kledayanti—moistens; āpaḥ —water; na—never; śoṣayati—dries; mārutaḥ—wind; acchedyaḥ—unbreakable; ayam—this soul; adāhyaḥ—cannot be burned; ayam—this soul; akledyaḥ—insoluble; aśoṣyaḥ—cannot be dried; eva —certainly; ca—and; nityaḥ—everlasting; sarva-gataḥ—all-pervading; sthāṇuḥ— unchangeable; acalaḥ—immovable; ayam—this soul; sanātanaḥ —eternally the same; avyaktaḥ—invisible; ayam—this soul; acintyaḥ—inconceivable; ayam— this soul; avikāryaḥ—unchangeable; ayam—this soul; ucyate—is said; tasmāt —therefore; evam—like this; viditvā—knowing it well; enam—this soul; na— do not; anuśocitum—may lament over; arhasi—you deserve; atha—if, however; ca—also; enam—this soul; nitya-jātam—always born; nityam—forever; vā—either; manyase—so think; mṛtam—dead; tathāpi —still; tvam—you; mahā-bāho—O mighty-armed one; na—never; enam —about the soul; śocitum—to lament; arhasi—deserve; jātasya—one who has taken his birth; hi—certainly; dhruvaḥ—a fact; mṛtyuḥ—death; dhruvam—it is also a fact; janma—birth; mṛtasya—of the dead; ca—also; tasmāt—therefore; aparihārye—for that which is unavoidable; arthe—in the matter of; na—do not; tvam—you; śocitum—to lament; arhasi—deserve; avyaktādīni—in the beginning unmanifested; bhūtāni—all that are created; vyakta—manifested; madhyāni—in the middle; bhārata—O descendant of Bharata; avyakta—nonmanifested; nidhanāni—all that are vanquished; eva— it is all like that; tatra—therefore; kā—what; paridevanā —lamentation; āścaryavat—amazing; paśyati—see; kaścit—some; enam—this soul; āścaryavat—amazing; vadati—speak; tathā—there; eva—certainly; ca —also; anyaḥ —others; āścaryavat—similarly amazing; ca—also; enam —this soul; anyaḥ— others; śṛṇoti—hear; śrutvā—having heard; api—even; enam—this soul; veda —do know; na—never; ca—and; eva—certainly; kaścit—anyone; dehī—the owner of the material body; nityam—eternally; avadhyaḥ— cannot be killed; ayam—this soul; dehe—in the body; sarvasya—of everyone; bhārata—O descendant of Bharata; tasmāt—therefore; sarvāṇi —all; bhūtāni—living entities (that are born); na—never; tvam—yourself; śocitum —to lament; arhasi— deserve; svadharmam—one's own religious principles; api—also; ca—indeed; avekṣya—considering; na—never; vikampitum—to hesitate; arhasi—you deserve; dharmyāt—from religious principles; hi—indeed; yuddhāt—of fighting; śreyaḥ—better engagements; anyat—anything else; kṣatriyasya —of the kṣatriya; na—does not; vidyate—exist; yadṛcchayā—by its own accord; ca—also; upapannam—arrived at; svarga —heavenly planet; dvāram—door; apāvṛtam—wide open; sukhinaḥ —very happy; kṣatriyāḥ—the members of the royal order; pārtha—O son of Pṛthā; labhante—do achieve; yuddham—war; īdṛśam—like this; atha—therefore; cet—if; tvam—you; imam—this; dharmyam—religious duty; saṅgrāmam—fighting; na—do not; kariṣyasi—perform; tataḥ—then; svadharmam—your religious duty; kīrtim—reputation; ca—also; hitvā— losing; pāpam—sinful reaction; avāpsyasi—do gain; akīrtim—infamy; ca—also; api—over and above; bhūtāni—all people; kathayiṣyanti—will speak; te—of you; avyayām—forever; sambhāvitasya —for a respectable man; ca—also; akīrtiḥ—ill fame; maraṇāt—than death; atiricyate—becomes more than; bhayāt—out of fear; raṇāt—from the battlefield; uparatam—ceased; maṁsyante—will consider; tvām—unto you; mahā-rathāḥ—the great generals; yeṣām—of those who; ca—also; tvam—you; bahu-mataḥ—in great estimation; bhūtvā—will become; yāsyasi—will go; lāghavam—decreased in value; avācya—unkind; vādān—fabricated words; ca—also; bahūn—many; vadiṣyanti—will say; tava—your; ahitāḥ—enemies; nindantaḥ—while vilifying; tava—your; sāmarthyam—ability; tataḥ—thereafter; duḥkhataram —more painful; nu—of course; kim—what is there; hataḥ—being killed; vā—either; prāpsyasi—you gain; svargam—the heavenly kingdom; jitvā—by conquering; vā—or; bhokṣyase—you enjoy; mahīm—the world; tasmāt—therefore; uttiṣṭha—get up; kaunteya—O son of Kuntī; yuddhāya—to fight; kṛta—determination; niścayaḥ—uncertainty; sukha—happiness; duḥkhe—in distress; same—in equanimity; kṛtvā— doing so; lābhālābhau—both in loss and profit; jayājayau—both in defeat and victory; tataḥ—thereafter; yuddhāya—for the sake of fighting; yujyasva —do fight; na—never; evam—in this way; pāpam—sinful reaction; avāpsyasi—you will gain; eṣā—all these; te—unto you; abhihitā—described; sāṅkhye—by analytical study; buddhiḥ—intelligence; yoge—work without fruitive result; tu—but; imām—this; śṛṇu—just hear; buddhyā—by intelligence; yuktaḥ —dovetailed; yayā—by which; pārtha—O son of Pṛthā; karma-bandham —bondage of reaction; prahāsyasi—you can be released from; na—there is not; iha—in this world; abhikrama—endeavoring; nāśaḥ— loss; asti—there is; pratyavāyaḥ—diminution; na—never; vidyate—there is; svalpam—little; api—although; asya—of this; dharmasya—of this occupation; trāyate—releases; mahataḥ—of very great; bhayāt—from danger; vyavasāyātmikā—resolute Kṛṣṇa consciousness; buddhiḥ—intelligence; ekā—only one; iha—in this world; kuru-nandana—O beloved child of the Kurus; bahu-śākhāḥ—various branches; hi—indeed; anantāḥ—unlimited; ca —also; buddhayaḥ—intelligence; avyavasāyinām—of those who are not in Kṛṣṇa consciousness; 43 yām imām—all these; puṣpitām—flowery; vācam—words; pravadanti— say; avipaścitaḥ—men with a poor fund of knowledge; veda-vāda-ratāḥ— supposed followers of the Vedas; pārtha—O son of Pṛtha; na—never; anyat —anything else; asti—there is; iti—this; vādinaḥ—advocates; kāmaātmānaḥ—desirous of sense gratification; svarga-parāḥ—aiming to achieve heavenly planets; janma-karma-phala-pradām—resulting in fruitive action, good birth, etc.; kriyā-viśeṣa—pompous ceremonies; bahulām—various; bhoga—sense enjoyment; aiśvarya—opulence; gatim—progress; prati— towards; bhoga—material enjoyment; aiśvarya—opulence; prasaktānām—those who are so attached; tayā—by such things; apahṛta-cetasām—bewildered in mind; vyavasāyātmikā—fixed determination; buddhiḥ—devotional service of the Lord; samādhau—in the controlled mind; na—never; vidhīyate—does take place; traiguṇya—pertaining to the three modes of material nature; viṣayāḥ— on the subject matter; vedāḥ—Vedic literatures; nistraiguṇyaḥ—in a pure state of spiritual existence; bhava—be; arjuna—O Arjuna; nirdvandvaḥ—free from the pains of opposites; nitya-sattva-sthaḥ—ever remaining in sattva (goodness); niryoga-kṣemaḥ—free from (the thought of) acquisition and preservation; ātmavān—established in the Self; yāvān—all that; arthaḥ—is meant; udapāne—in a well of water; sarvataḥ —in all respects; sampluta-udake—in a great reservoir of water; tāvān —similarly; sarveṣu—in all; vedeṣu—Vedic literatures; brāhmaṇasya—of the man who knows the Supreme Brahman; vijānataḥ—of one who is in complete knowledge; karmaṇi—prescribed duties; eva—certainly; adhikāraḥ—right; te—of you; mā—never; phaleṣu—in the fruits; kadācana—at any time; mā—never; karma-phala—in the result of the work; hetuḥ—cause; bhūḥ—become; mā— never; te—of you; saṅgaḥ—attachment; astu—be there; akarmaṇi—in not doing; yoga-sthaḥ—steadfast in yoga; kuru—perform; karmāṇi—your duty; saṅgam—attachment; tyaktvā—having abandoned; dhanañjaya—O Dhanañjaya; siddhi-asiddhyoḥ—in success and failure; samaḥ—the same; bhūtvā—having become; samatvam—evenness of mind; yogaḥ—yoga; ucyate —is called; dūreṇa—by discarding it at a long distance; hi—certainly; avaram— abominable; karma—activities; buddhi-yogāt—on the strength of Kṛṣṇa consciousness; dhanañjaya—O conqueror of wealth; buddhau—in such consciousness; śaraṇam—full surrender; anviccha—desire; kṛpaṇāḥ—the misers; phala-hetavaḥ—those desiring fruitive action; buddhi-yuktaḥ—one who is engaged in devotional service; jahāti—can get rid of; iha—in this life; ubhe—in both; sukṛta-duṣkṛte—in good and bad results; tasmāt—therefore; yogāya—for the sake of devotional service; yujyasva—be so engaged; yogaḥ—Kṛṣṇa consciousness; karmasu—in all activities; kauśalam—art"""

text_sample = """dhṛtarāṣṭra—King Dhṛtarāṣṭra; uvāca—said; dharma-kṣetre—in the place of pilgrimage; kuru-kṣetre—in the place named Kurukṣetra; samavetā— assembled; yuyutsava—desiring to fight; māmakā—my party (sons); pāṇḍavā—the sons of Pāṇḍu; ca—and; eva—certainly; kim— what; akurvata— did they do; sañjaya—O Sañjaya; sañjaya—Sañjaya; uvāca—said; dṛṣṭvā—after seeing; tu—but; pāṇḍavaanīkam—the soldiers of the Pāṇḍavas; vyūḍham—arranged in military phalanx; duryodhana—King Duryodhana; tadā—at that time; ācāryam— the teacher; upasaṅgamya—approaching nearby; rājā—the king; vacanam— words; abravīt—spoke"""

#print(text_sample.split("; "))
tokens = text.split("; ")
token_dict = {}
for i in tokens:
    a = i.split("—")
    # if len(a)==1:print(a)
    # print(a)
    # print(a[0].strip())
    # print(a[1].strip())
    token_dict[a[0].strip()] = a[1].strip()

# print(token_dict)
# print(len(tokens))
# print(len(token_dict))
# print(f"Repetitive tokens: {len(tokens)-len(token_dict)}")

# shloka = "dhṛtarāṣṭra uvāca dharma-kṣetre kuru-kṣetre samavetā yuyutsava māmakā pāṇḍavāś caiva kim akurvata sañjaya"
shloka = """uvāca—the Supreme Personality of Godhead said; kutaḥ— wherefrom; tvā—unto you; kaśmalam—dirtiness; idam—this lamentation; viṣame—this hour"""
shloka_tokens = shloka.split()
print(shloka_tokens)
hard_translation = []
hard_trans_sentence = ""
for i in shloka_tokens:
    try:
        hard_translation.append(token_dict[i])
        hard_trans_sentence+=token_dict[i]
        hard_trans_sentence+=" "
        # print(token_dict[i])
    except:
        matchornot = dictcom(token_dict,i)
        # print(matchornot)
        if matchornot: 
            token_dict[matchornot[1]] = token_dict[matchornot[0]]
            hard_trans_sentence+=token_dict[matchornot[0]]
        else:
            hard_translation.append(i)
            hard_trans_sentence+=i
            hard_trans_sentence+=" "
            print("Term not found",i)
print(hard_trans_sentence)


genai.configure(api_key='AIzaSyBxYuJ5wtcsaDaTrNj5KnyzlsxAHRTYr-M')

def ask_gemini(prompt):
    try:
        model = genai.GenerativeModel('gemini-1.5-pro-latest')
        
        response = model.generate_content(prompt)
        
        return response.text
    except Exception as e:
        return f"An error occurred: {e}"

prompt = hard_trans_sentence
response = ask_gemini(prompt)
print("Meaningful Translation:")
print(response)